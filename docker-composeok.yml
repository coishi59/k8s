version: '3'
services:  
  web:
    image: notes-nodejs
    build: .
    ports: 
      - "4000:4000"
    depends_on: 
      - "mongo"
  mongo:
      image: "mongo"
      ports: 
          - "27017:27017"
      volumes: 
        - ./data-volume:/data/db
  nginx:
    build: ./nginx
    image: mynginx
    ports: 
      - "80:80"
    links:
      - web:notes-nodejs 
volumes: 
  data-volume:
